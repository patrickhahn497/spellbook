{"ast":null,"code":"import _classCallCheck from\"/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import logo from\"./logo.svg\";import'./App.css';import'tachyons';import SearchBox from'./components/SearchBox';import SpellPanel from'./components/SpellPanel';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.onSearchChange=function(event){_this.setState({searchfield:event.target.value});console.log(\"searchfield: \"+_this.state.searchfield);// console.log(\"search url\" + this.state.searchUrl);\n};_this.search=function(){_this.urlifySpell(_this.state.searchfield);if(_this.state.searchUrl){fetch(_this.state.searchUrl).then(function(response){return response.json();}).then(function(spell){return _this.setState({result:spell});});}console.log(_this.urlifySpell(_this.state.searchfield));};_this.onSearchClick=function(event){_this.search();};_this.onEnter=function(event){if(event.which==13||event.keyCode==13){event.preventDefault();_this.search();}};_this.state={searchfield:'',result:{name:\"\",desc:\"\",range:\"\",level:null},searchUrl:\"\"};return _this;}_createClass(App,[{key:\"urlifySpell\",value:function urlifySpell(text){var _this2=this;var queries=text.split(\" \");var linkUrl='http://www.dnd5eapi.co/api/spells/?name='+queries.join(\"+\");var spellUrl='';fetch(linkUrl).then(function(response){return response.json();}).then(function(result){if(result.count>=1){_this2.setState({searchUrl:result.results[0].url});}else{window.alert(\"No result found\");}});console.log(\"spellurl \"+spellUrl);console.log(\"searchurl \"+this.state.searchurl);}},{key:\"render\",value:function render(){var _this$state$result=this.state.result,name=_this$state$result.name,desc=_this$state$result.desc,range=_this$state$result.range,level=_this$state$result.level,higher_level=_this$state$result.higher_level,duration=_this$state$result.duration,concentration=_this$state$result.concentration,casting_time=_this$state$result.casting_time;return React.createElement(\"div\",{className:\"tc\"},React.createElement(\"h1\",{className:\"tc title\"},\"Spellbook\"),React.createElement(\"p\",null,\" Click twice if search results don't come in the first time. The oracle needs time to browse the spell library \"),React.createElement(\"p\",null,\" If the spell isn't here, it's because it's a Xanathar spell. The oracle does not have access to those\"),React.createElement(SearchBox,{searchClick:this.onSearchClick,searchfield:this.state.searchfield,searchChange:this.onSearchChange,onEnter:this.onEnter}),React.createElement(SpellPanel,{name:name,desc:desc,range:range,level:level,higher_level:higher_level,duration:duration,concentration:concentration,casting_time:casting_time}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/patrickhahn/Documents/Personal Learning/WebDesign/SpellBook/spellbook/src/App.js"],"names":["React","Component","SearchBox","SpellPanel","App","onSearchChange","event","setState","searchfield","target","value","console","log","state","search","urlifySpell","searchUrl","fetch","then","response","json","spell","result","onSearchClick","onEnter","which","keyCode","preventDefault","name","desc","range","level","text","queries","split","linkUrl","join","spellUrl","count","results","url","window","alert","searchurl","higher_level","duration","concentration","casting_time"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport 'tachyons';\nimport SearchBox from './components/SearchBox'\nimport SpellPanel from './components/SpellPanel'\n\nclass App extends Component {\n\n  constructor() {\n    super();\n    this.state = {\n      searchfield: '',\n      result: {name: \"\",\n                desc: \"\",\n                range: \"\",\n                level: null},\n      searchUrl : \"\"\n    }\n  }\n\n\n  onSearchChange = (event) => {\n    this.setState({searchfield: event.target.value});\n    console.log(\"searchfield: \" + this.state.searchfield);\n    // console.log(\"search url\" + this.state.searchUrl);\n  }\n\n\n  search = () => {\n    this.urlifySpell(this.state.searchfield);\n    if (this.state.searchUrl){\n      fetch(this.state.searchUrl)\n        .then(response=>response.json())\n        .then(spell => this.setState({result: spell}));\n    }\n    console.log(this.urlifySpell(this.state.searchfield));\n\n  }\n\n  onSearchClick = (event) => {\n    this.search();\n\n  }\n\n  onEnter = (event) => {\n    if (event.which==13 || event.keyCode==13){\n      event.preventDefault();\n      this.search();\n    }\n  }\n\n\n  urlifySpell(text) {\n    const queries = text.split(\" \");\n    const linkUrl = 'http://www.dnd5eapi.co/api/spells/?name=' + queries.join(\"+\");\n    var spellUrl = '';\n    fetch(linkUrl)\n      .then(response=>response.json())\n      .then(result=> {\n        if (result.count >=1){\n          this.setState({searchUrl: result.results[0].url});\n        } else {\n          window.alert(\"No result found\");\n        }\n    });\n\n    console.log(\"spellurl \" + spellUrl);\n    console.log(\"searchurl \" + this.state.searchurl);\n\n  }\n\n  render() {\n    const {name, desc, range, level, higher_level, duration, concentration, casting_time} = this.state.result;\n\n    return (\n      <div className=\"tc\">\n        <h1 className=\"tc title\">Spellbook</h1>\n        <p> Click twice if search results don't come in the first time. The oracle needs time to browse the spell library </p>\n        <p> If the spell isn't here, it's because it's a Xanathar spell. The oracle does not have access to those</p>\n        <SearchBox searchClick={this.onSearchClick} searchfield={this.state.searchfield} searchChange={this.onSearchChange} onEnter={this.onEnter}/>\n        <SpellPanel name={name} desc={desc} range={range} level={level} higher_level={higher_level} duration={duration} concentration={concentration}\n          casting_time={casting_time}/>\n      </div>\n      );\n\n  }\n\n\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}